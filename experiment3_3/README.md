## آزمایش شماره سه 💡

### گزارش کار و مراحل 📝

در اینجا به دنبال ایجاد یک نوع رقص نور هستیم یعنی ایجاد یک الگوریتم متناوب برای روشن و خاموش شدن LED ها. بنابراین در کد های برنامه آرایه ای ایجاد می کنیم که در واقع نحوه چیدمان درایه های همین آرایه تعیین کننده نوع رقص نور ما می باشد. آرایه ای با ابعاد 4\*4 ایجاد می کنیم به صورتی که در هر ردیف آن همواره فقط یک درایه 1 ( به معنی ولتاژ HIGH ) وجود دارد و بقیه درایه ها صفر می باشند. سپس یک حلقه تو در تو درست می کنیم و گام های حلقه را به صورتی تنظیم می کنیم که :  
در هر گام حلقه داخلی، وضعیت روشن یا خاموش بودن یک LED تعیین می شود ( بر اساس درایه های آرایه ) و در گام بعدی به سراغ LED بعدی می رویم و همچنین در همان ردیف آرایه نیز یک ستون به جلو می رویم و این فرایند آن قدر ادامه دارد تا تمام ستون های یک ردیف از آرایه تمام شود. پس بنابراین در یکبار طی کردن یک ردیف کامل آرایه یک دور وضعیت روشن یا خاموش بودن تمام LED ها مشخص می شود. در نهایت حلقه بیرونی یک گام به جلو حرکت می کند که به معنی رفتن به ردیف بعدی آرایه می باشد و این چرخه تا رسیدن به آخرین ردیف آرایه تکرار خواهد شد.

---

### توصیف کد های برنامه 💻

```cpp
#define key1 digitalRead(A0)    // تعریف key1 به عنوان نماینده دریافت ولتاژ کلید

void setup() {
  pinMode(A0, INPUT);
  for (int i = 0; i < 4; i++) {     // تنظیم کردن پایه خروجی همه دیودها
    pinMode(i, OUTPUT);
  }
}
void loop() {
  int i, a;
  int dancingLight[4][4] = {
    {0, 0, 0, 1},
    {0, 0, 1, 0},
    {0, 1, 0, 0},
    {1, 0, 0, 0},
  };

  for (i = 0; i < 4; i++) {     // خاموش کردن تمام دیودها پیش از شروع الگوریتم رقص نور
    digitalWrite(i, 0);
  }

  if (key1 == 0) {      // اجرای شرط در صورت بسته شدن کلید
    for (a = 0; a < 4; a++) {   // جلو رفتن ردیف به ردیف آرایه
      for (i = 0; i < 4; i++) { // جلو رفتن ستون به ستون از هر ردیف آرایه
        digitalWrite(i, dancingLight[a][i]);    // در هر گام، وضعیت را برای یک دیود تعیین میکنیم و بعد به سراغ دیود بعدی می رویم
      }
      delay(200);   // تاخیر 200 میلی ثانیه بعد از طی کردن هر ردیف آرایه
    }
  }
};
```

---

### شرح کارکرد مدار به صورت ویدیویی ( حالت بدون متصل بودن کلید ) 📽️

![micro and circuit](/media/microprocessor_5.gif)

---

### شرح کارکرد مدار به صورت ویدیویی ( حالت عملکرد با کلید ) 📽️

![micro and circuit](/media/microprocessor_6.gif)

---

### شماتیک مدار 🗺️

![micro and circuit](/media/schematic_5.jpg)
